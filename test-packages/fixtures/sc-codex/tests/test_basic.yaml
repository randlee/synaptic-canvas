test_id: sc-codex-001
test_name: Basic /sc-codex invocation
description: Verify /sc-codex runs and returns JSON with output/agentId.

execution:
  prompt: |
    /sc-codex --background write a short haiku about rain.
    Wait up to 8 seconds for Codex to finish. If it completes, return the haiku and a line `Grade: N` (N is 1-10).
    If it is still running after 8 seconds, reply only with `STILL RUNNING` and the output_file path.
  model: haiku
  tools:
    - Bash
  timeout_ms: 120000

expectations:
  - id: exp-001
    description: sc-codex command invokes Python runner
    type: tool_call
    expected:
      tool: Bash
      pattern: "sc_codex_task.py"

  - id: exp-002
    description: Output includes grade
    type: output_contains
    expected:
      pattern: 'Grade:\s*(10|[1-9])\b'
      flags: "i"
