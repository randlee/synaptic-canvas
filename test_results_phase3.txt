============================= test session starts ==============================
platform darwin -- Python 3.14.0, pytest-9.0.1, pluggy-1.6.0 -- /Users/randlee/Documents/github/synaptic-canvas/.venv/bin/python3.14
cachedir: .pytest_cache
rootdir: /Users/randlee/Documents/github/synaptic-canvas
collecting ... collected 67 items

tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_success PASSED [  1%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_with_path PASSED [  2%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_invalid_url PASSED [  4%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_network_error PASSED [  5%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_parse_error FAILED [  7%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_empty_response PASSED [  8%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_timeout_handling PASSED [ 10%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_parse_registry_metadata_valid PASSED [ 11%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_parse_registry_metadata_missing_fields PASSED [ 13%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_parse_registry_metadata_invalid_structure PASSED [ 14%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_case_insensitive PASSED [ 16%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_substring_match FAILED [ 17%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_no_matches PASSED [ 19%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_multiple_matches PASSED [ 20%]
tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_empty_query PASSED [ 22%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_single_registry PASSED [ 23%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_all_registries PASSED [ 25%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_with_search PASSED [ 26%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_nonexistent_registry_error PASSED [ 28%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_network_error_handled PASSED [ 29%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_shows_package_metadata PASSED [ 31%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_shows_version_info PASSED [ 32%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_shows_source_registry PASSED [ 34%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_shows_local_and_remote_together PASSED [ 35%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_empty_registry_handled FAILED [ 37%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_large_registry_efficient PASSED [ 38%]
tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_caches_results PASSED [ 40%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_single_registry PASSED [ 41%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_all_registries PASSED [ 43%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_case_insensitive PASSED [ 44%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_no_matches PASSED [ 46%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_multiple_matches PASSED [ 47%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_shows_source_registry PASSED [ 49%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_network_error_handled PASSED [ 50%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_invalid_registry_error PASSED [ 52%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_empty_query_error PASSED [ 53%]
tests/test_sc_install_phase1_2.py::TestSearchCommand::test_search_helps_user_find_package PASSED [ 55%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_single_package PASSED [ 56%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_nonexistent_package_error PASSED [ 58%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_invalid_registry_error PASSED [ 59%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_network_error_handled PASSED [ 61%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_shows_full_metadata PASSED [ 62%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_shows_dependencies PASSED [ 64%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_shows_version_info PASSED [ 65%]
tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_backward_compat_local_package FAILED [ 67%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_from_remote_registry PASSED [ 68%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_downloads_package PASSED [ 70%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_nonexistent_package_error PASSED [ 71%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_invalid_registry_error PASSED [ 73%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_prefers_local_over_remote PASSED [ 74%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_falls_back_to_remote PASSED [ 76%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_respects_global_flag PASSED [ 77%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_respects_local_flag PASSED [ 79%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_with_force_flag PASSED [ 80%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_network_error_handled PASSED [ 82%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_verifies_integrity PASSED [ 83%]
tests/test_sc_install_phase1_2.py::TestRemoteInstallation::test_install_remote_performance PASSED [ 85%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_invalid_registry_url_rejected PASSED [ 86%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_network_timeout_handled PASSED [ 88%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_malformed_json_handled PASSED [ 89%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_missing_package_metadata_handled PASSED [ 91%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_empty_search_results_handled PASSED [ 92%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_registry_connection_error_message PASSED [ 94%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_help_shows_remote_options PASSED [ 95%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_help_documents_registry_flag PASSED [ 97%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_help_documents_search_command PASSED [ 98%]
tests/test_sc_install_phase1_2.py::TestPhase3ErrorHandling::test_error_messages_actionable PASSED [100%]

=================================== FAILURES ===================================
E   AssertionError: assert ('parse' in '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n' or 'json' in '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n')
     +  where '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n' = <built-in method lower of str object at 0x1021957f0>()
     +    where <built-in method lower of str object at 0x1021957f0> = '\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n'.lower
     +      where '\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n' = CaptureResult(out='', err='\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n').err
     +  and   '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n' = <built-in method lower of str object at 0x1021957f0>()
     +    where <built-in method lower of str object at 0x1021957f0> = '\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n'.lower
     +      where '\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n' = CaptureResult(out='', err='\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n').err
/Users/randlee/Documents/github/synaptic-canvas/tests/test_sc_install_phase1_2.py:2035: AssertionError: assert ('parse' in '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n' or 'json' in '\x1b[1;33m⚠\x1b[0m network error fetching registry: <urlopen error [errno 8] nodename nor servname provided, or not known>\n')
E   AssertionError: assert 1 == 2
     +  where 1 = len([{'author': 'Test Author', 'dependencies': [], 'description': 'Testing utilities', 'download_url': 'https://github.com/example/test-helper/archive/v0.5.0.zip', ...}])
/Users/randlee/Documents/github/synaptic-canvas/tests/test_sc_install_phase1_2.py:2085: AssertionError: assert 1 == 2
E   AssertionError: assert ('no packages' in '\nregistry: test-registry (https://test.example.com)\n============================================================\n' or 111 == 0 or 'found' in '\nregistry: test-registry (https://test.example.com)\n============================================================\n')
     +  where '\nregistry: test-registry (https://test.example.com)\n============================================================\n' = <built-in method lower of str object at 0x1023d94d0>()
     +    where <built-in method lower of str object at 0x1023d94d0> = '\nRegistry: test-registry (https://test.example.com)\n============================================================\n'.lower
     +      where '\nRegistry: test-registry (https://test.example.com)\n============================================================\n' = CaptureResult(out='\nRegistry: test-registry (https://test.example.com)\n============================================================\n', err='\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n\x1b[1;33m⚠\x1b[0m Failed to fetch registry: test-registry\n').out
     +  and   111 = len('Registry: test-registry (https://test.example.com)\n============================================================')
     +    where 'Registry: test-registry (https://test.example.com)\n============================================================' = <built-in method strip of str object at 0x1023d94d0>()
     +      where <built-in method strip of str object at 0x1023d94d0> = '\nRegistry: test-registry (https://test.example.com)\n============================================================\n'.strip
     +        where '\nRegistry: test-registry (https://test.example.com)\n============================================================\n' = CaptureResult(out='\nRegistry: test-registry (https://test.example.com)\n============================================================\n', err='\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n\x1b[1;33m⚠\x1b[0m Failed to fetch registry: test-registry\n').out
     +  and   '\nregistry: test-registry (https://test.example.com)\n============================================================\n' = <built-in method lower of str object at 0x1023d94d0>()
     +    where <built-in method lower of str object at 0x1023d94d0> = '\nRegistry: test-registry (https://test.example.com)\n============================================================\n'.lower
     +      where '\nRegistry: test-registry (https://test.example.com)\n============================================================\n' = CaptureResult(out='\nRegistry: test-registry (https://test.example.com)\n============================================================\n', err='\x1b[1;33m⚠\x1b[0m Network error fetching registry: <urlopen error [Errno 8] nodename nor servname provided, or not known>\n\x1b[1;33m⚠\x1b[0m Failed to fetch registry: test-registry\n').out
/Users/randlee/Documents/github/synaptic-canvas/tests/test_sc_install_phase1_2.py:2190: AssertionError: assert ('no packages' in '\nregistry: test-registry (https://test.example.com)\n============================================================\n' or 111 == 0 or 'found' in '\nregistry: test-registry (https://test.example.com)\n============================================================\n')
E   assert 0 == 1
----------------------------- Captured stdout call -----------------------------
Package: sc-delay-tasks
Path: /Users/randlee/Documents/github/synaptic-canvas/packages/sc-delay-tasks

name: sc-delay-tasks
version: 0.4.0
description: >
  Schedule delayed one-shot or bounded polling actions with minimal heartbeats.
  Useful for waiting before running checks (e.g., CI status) or polling with stop-on-success.
author: randlee
license: MIT
tags:
  - delay
  - polling
  - scheduler
  - ci
  - workflow
  - agents

# Files to install (relative to package root)
artifacts:
  commands:
    - commands/delay.md
  skills:
    - skills/delaying-tasks/SKILL.md
  agents:
    - agents/delay-once.md
    - agents/delay-poll.md
    - agents/git-pr-check-delay.md
  scripts:
    - scripts/delay-run.py

# No variables — Tier 0 package (direct copy)

# Runtime requirements
requires:
  - bash
  - python3
/Users/randlee/Documents/github/synaptic-canvas/tests/test_sc_install_phase1_2.py:2355: assert 0 == 1
=========================== short test summary info ============================
FAILED tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_fetch_registry_json_parse_error
FAILED tests/test_sc_install_phase1_2.py::TestRemoteRegistryFetching::test_search_packages_substring_match
FAILED tests/test_sc_install_phase1_2.py::TestListRemote::test_list_remote_empty_registry_handled
FAILED tests/test_sc_install_phase1_2.py::TestInfoRemote::test_info_remote_backward_compat_local_package
=================== 4 failed, 63 passed in 450.26s (0:07:30) ===================
